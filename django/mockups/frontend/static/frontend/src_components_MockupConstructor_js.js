/*! For license information please see src_components_MockupConstructor_js.js.LICENSE.txt */
(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_MockupConstructor_js"],{"./src/components/AddImageButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\nfunction AddImageButton({\n  setImage\n}) {\n  const fileInput = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const handleButtonClick = () => {\n    fileInput.current.click();\n  };\n  const handleFileChange = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImage(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "flex"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "file",\n    ref: fileInput,\n    style: {\n      display: "none"\n    },\n    onChange: handleFileChange\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "btn btn-block btn-primary",\n    onClick: handleButtonClick\n  }, "Add Image"));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AddImageButton);\n\n//# sourceURL=webpack://frontend/./src/components/AddImageButton.js?')},"./src/components/CenterHorizontallyButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\nfunction CenterHorizontallyButton({\n  setIsCenterHorizontally\n}) {\n  const handleClick = () => {\n    setIsCenterHorizontally(prevState => !prevState);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "btn btn-block",\n    onClick: handleClick\n  }, "Center Horizontally");\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CenterHorizontallyButton);\n\n//# sourceURL=webpack://frontend/./src/components/CenterHorizontallyButton.js?')},"./src/components/CenterVerticallyButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\nfunction CenterVerticallyButton({\n  setIsCenterVertically\n}) {\n  const handleClick = () => {\n    setIsCenterVertically(prevState => !prevState);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "btn btn-block",\n    onClick: handleClick\n  }, "Center Vertically");\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CenterVerticallyButton);\n\n//# sourceURL=webpack://frontend/./src/components/CenterVerticallyButton.js?')},"./src/components/ColorPanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _uiw_react_color_wheel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uiw/react-color-wheel */ "./node_modules/@uiw/react-color-wheel/esm/index.js");\n/* harmony import */ var _uiw_react_color_shade_slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uiw/react-color-shade-slider */ "./node_modules/@uiw/react-color-shade-slider/esm/index.js");\n/* harmony import */ var _uiw_react_color_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uiw/react-color-block */ "./node_modules/@uiw/react-color-block/esm/index.js");\n\n\n\n\nfunction ColorPanel({\n  hsva,\n  setHsva\n}) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_uiw_react_color_block__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    color: hsva,\n    onChange: color => setHsva({\n      ...hsva,\n      ...color.hsva\n    })\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_uiw_react_color_wheel__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    color: hsva,\n    onChange: color => setHsva({\n      ...hsva,\n      ...color.hsva\n    })\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_uiw_react_color_shade_slider__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    hsva: hsva,\n    style: {\n      width: 210,\n      marginTop: 20\n    },\n    onChange: newShade => {\n      setHsva({\n        ...hsva,\n        ...newShade\n      });\n    }\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ColorPanel);\n\n//# sourceURL=webpack://frontend/./src/components/ColorPanel.js?')},"./src/components/ImageEditor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var _PixiJSApp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PixiJSApp */ "./src/components/PixiJSApp.js");\n/* harmony import */ var _CenterVerticallyButton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CenterVerticallyButton */ "./src/components/CenterVerticallyButton.js");\n/* harmony import */ var _CenterHorizontallyButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CenterHorizontallyButton */ "./src/components/CenterHorizontallyButton.js");\n/* harmony import */ var _SizeBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SizeBar */ "./src/components/SizeBar.js");\n/* harmony import */ var _AddImageButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AddImageButton */ "./src/components/AddImageButton.js");\n\n\n\n\n\n\n\nfunction ImageEditor({\n  onTextureImageChange,\n  designImage,\n  templateImage,\n  imageHeight,\n  imageWidth\n}) {\n  const [isCenterVertically, setIsCenterVertically] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [isCenterHorizontally, setIsCenterHorizontally] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const [size, setSize] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(50);\n  const [image, setImage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(templateImage);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: ""\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_PixiJSApp__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    size: size,\n    isCenterHorizontally: isCenterHorizontally,\n    isCenterVertically: isCenterVertically,\n    image: image,\n    onTextureImageChange: onTextureImageChange,\n    templateImage: templateImage,\n    imageHeight: imageHeight,\n    imageWidth: imageWidth\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "flex flex-col space-y-4 p-4 bg-white rounded-md shadow-md"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_AddImageButton__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    setImage: setImage\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "flex justify-between space-x-4"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "w-1/2"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CenterVerticallyButton__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    setIsCenterVertically: setIsCenterVertically\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "w-1/2"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CenterHorizontallyButton__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    setIsCenterHorizontally: setIsCenterHorizontally\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SizeBar__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    size: size,\n    setSize: setSize\n  })));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ImageEditor);\n\n//# sourceURL=webpack://frontend/./src/components/ImageEditor.js?')},"./src/components/MockupConstructor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/esm/react-router.js");\n/* harmony import */ var _ColorPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ColorPanel */ "./src/components/ColorPanel.js");\n/* harmony import */ var _ThreeJSApp__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ThreeJSApp */ "./src/components/ThreeJSApp.js");\n/* harmony import */ var _ImageEditor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ImageEditor */ "./src/components/ImageEditor.js");\n\n\n\n\n\nfunction MockupConstructor() {\n  const {\n    slug\n  } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useParams)();\n  const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [notFound, setNotFound] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [hsva, setHsva] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    h: 214,\n    s: 43,\n    v: 90,\n    a: 1\n  });\n  const [textureImage, setTextureImage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const handleSetTexutreImage = textureImage => {\n    setTextureImage(textureImage);\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    fetch(`/api/mockuptemplates/${slug}/`).then(response => {\n      if (!response.ok) {\n        if (response.status === 404) {\n          setNotFound(true);\n        }\n        throw new Error("Network response was not ok");\n      }\n      return response.json();\n    }).then(data => setData(data)).catch(error => console.error("Error:", error));\n  }, [slug]);\n  if (notFound) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, "404 Not Found");\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "flex justify-center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "w-full p-0"\n  }, data && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "flex justify-between"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ImageEditor__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    onTextureImageChange: handleSetTexutreImage,\n    designImage: data.templateImage,\n    templateImage: data.templateImage,\n    imageHeight: data.templateImageHeight,\n    imageWidth: data.templateImageWidth\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "w-full aspect-w-1 aspect-h-1"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ThreeJSApp__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    color: hsva,\n    textureImage: textureImage,\n    glb: data.glb,\n    templateImage: data.templateImage,\n    mockupName: data.name\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ColorPanel__WEBPACK_IMPORTED_MODULE_1__["default"], {\n    hsva: hsva,\n    setHsva: setHsva\n  })))));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MockupConstructor);\n\n//# sourceURL=webpack://frontend/./src/components/MockupConstructor.js?')},"./src/components/PixiJSApp.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var pixi_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pixi.js */ "./node_modules/pixi.js/lib/index.mjs");\n\n\nfunction PixiJSApp({\n  size,\n  isCenterHorizontally,\n  isCenterVertically,\n  image,\n  onTextureImageChange,\n  templateImage,\n  imageHeight,\n  imageWidth\n}) {\n  const pixiContainer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const imageDesignRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const [stageImageUrl, setStageImageUrl] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const appRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Create PixiJS application\n    const app = new pixi_js__WEBPACK_IMPORTED_MODULE_1__.Application({\n      background: "#ffffff",\n      width: imageWidth,\n      height: imageHeight,\n      transparent: true\n    });\n    appRef.current = app;\n\n    // Create a transparent Graphics object\n    const graphics = new pixi_js__WEBPACK_IMPORTED_MODULE_1__.Graphics();\n    graphics.beginFill(0xffffff, 0); // 0 alpha for full transparency\n    graphics.drawRect(0, 0, app.screen.width, app.screen.height);\n    graphics.endFill();\n\n    // Create a render texture from the Graphics object\n    const renderTexture = app.renderer.generateTexture(graphics);\n\n    // Create a sprite from the render texture\n    const transparentSprite = new pixi_js__WEBPACK_IMPORTED_MODULE_1__.Sprite(renderTexture);\n\n    // Create a container to hold both sprites\n    const container = new pixi_js__WEBPACK_IMPORTED_MODULE_1__.Container();\n\n    // Add the transparent sprite to the container\n    container.addChild(transparentSprite);\n\n    // Upload image design\n    console.log("image:", templateImage);\n    const imageDesign = pixi_js__WEBPACK_IMPORTED_MODULE_1__.Sprite.from(templateImage);\n    imageDesign.anchor.set(0.5);\n    imageDesign.x = app.screen.width;\n    imageDesign.y = app.screen.height;\n\n    // Scale the sprite to half its original size\n    imageDesignRef.current = imageDesign;\n\n    // Enable interaction on the sprite\n    imageDesign.eventMode = "dynamic";\n    imageDesign.buttonMode = true;\n\n    // Add variables to hold the state of dragging\n    let isDragging = false;\n    let prevX = 0;\n    let prevY = 0;\n\n    // Add event listeners for the drag start, end, and move events\n    imageDesign.on("pointerdown", event => {\n      isDragging = true;\n      prevX = event.global.x;\n      prevY = event.global.y;\n    }).on("pointerup", () => {\n      isDragging = false;\n      renderStage();\n    }).on("pointerupoutside", () => {\n      isDragging = false;\n      renderStage();\n    }).on("pointermove", event => {\n      if (isDragging) {\n        const newX = event.global.x;\n        const newY = event.global.y;\n        imageDesign.x += newX - prevX;\n        imageDesign.y += newY - prevY;\n        prevX = newX;\n        prevY = newY;\n      }\n    });\n\n    // Add the image design sprite to the container\n    container.addChild(imageDesign);\n\n    // Add the container to the stage\n    app.stage.addChild(container);\n\n    // Append the app view to the container\n    pixiContainer.current.appendChild(app.view);\n\n    // Clean up on unmount\n    return () => {\n      app.destroy(true, {\n        children: true,\n        texture: true,\n        baseTexture: true\n      });\n    };\n  }, []); // Empty dependency array means this effect runs once on mount and clean up on unmount\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Update PixiJS application size on window resize\n    imageDesignRef.current.scale.set(size / 100);\n    renderStage();\n  }, [size]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    imageDesignRef.current.x = imageWidth / 2;\n    renderStage();\n  }, [isCenterHorizontally]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    imageDesignRef.current.y = imageHeight / 2;\n    renderStage();\n  }, [isCenterVertically]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (image) {\n      const texture = pixi_js__WEBPACK_IMPORTED_MODULE_1__.Texture.from(image);\n      imageDesignRef.current.texture = texture;\n      appRef.current.render();\n      renderStage();\n    }\n  }, [image]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Call the callback function whenever stageImageUrl changes\n    if (stageImageUrl) {\n      onTextureImageChange(stageImageUrl);\n    }\n  }, [stageImageUrl]);\n  const renderStage = () => {\n    // Extract a transparent PNG of the entire app\n    const renderer = appRef.current.renderer;\n    const stage = appRef.current.stage;\n    const extract = renderer.extract;\n\n    // Define the area to extract\n    const area = new pixi_js__WEBPACK_IMPORTED_MODULE_1__.Rectangle(0, 0, appRef.current.screen.width, appRef.current.screen.height);\n\n    // Extract the area as a canvas\n    const canvas = extract.canvas(stage, area);\n    const dataUrl = canvas.toDataURL("image/png", 1);\n\n    // Set the stage image URL\n    setStageImageUrl(dataUrl);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "border-dashed border-2 border-sky-500",\n    ref: pixiContainer\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PixiJSApp);\n\n//# sourceURL=webpack://frontend/./src/components/PixiJSApp.js?')},"./src/components/SizeBar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n\nfunction SizeBar({\n  size,\n  setSize\n}) {\n  const handleSizeChange = event => {\n    setSize(Number(event.target.value));\n  };\n  console.log(size);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "space-y-4"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("h1", null, "Change your image size:"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", {\n    type: "range",\n    min: 0,\n    max: "120",\n    value: size,\n    className: "range",\n    onChange: handleSizeChange\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SizeBar);\n\n//# sourceURL=webpack://frontend/./src/components/SizeBar.js?')},"./src/components/ThreeJSApp.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ "./node_modules/three/build/three.module.js");\n/* harmony import */ var three_examples_jsm_loaders_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader.js */ "./node_modules/three/examples/jsm/loaders/GLTFLoader.js");\n/* harmony import */ var _uiw_color_convert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uiw/color-convert */ "./node_modules/@uiw/color-convert/esm/index.js");\n\n\n\n\nfunction ThreeJSApp({\n  color,\n  textureImage,\n  glb,\n  templateImage,\n  mockupName\n}) {\n  const sceneRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const rendererRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const cameraRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const mockupAreaMaterialRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const geometryTextureRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let animationFrameId;\n    const currentContainerRef = containerRef.current;\n    const containerWidth = containerRef.current.clientWidth;\n    const containerHeight = containerRef.current.clientHeight;\n    const renderer = new three__WEBPACK_IMPORTED_MODULE_1__.WebGLRenderer({\n      antialias: true\n    });\n    const scene = new three__WEBPACK_IMPORTED_MODULE_1__.Scene();\n    const aspect = containerWidth / containerHeight;\n    const camera = new three__WEBPACK_IMPORTED_MODULE_1__.OrthographicCamera(-aspect * 2, aspect * 2, 2, -2, 0.1, 51);\n    renderer.setSize(containerWidth, containerHeight);\n    // Append the renderer\'s DOM element to the container\n    containerRef.current.appendChild(renderer.domElement);\n    sceneRef.current = scene;\n    rendererRef.current = renderer;\n    cameraRef.current = camera;\n\n    // Set the camera position\n    camera.position.z = 51;\n\n    // Create a GLTFLoader\n    const loader = new three_examples_jsm_loaders_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader();\n\n    // Load a .glb file\n    loader.load(glb,\n    // path to .glb file\n    gltf => {\n      gltf.scene.traverse(child => {\n        if (child.isMesh && child.name === "image") {\n          // replace \'ImagePlane\' with the actual name of your image plane\n          const texture = child.material.map;\n          child.material = new three__WEBPACK_IMPORTED_MODULE_1__.MeshBasicMaterial({\n            map: texture\n          });\n        }\n        if (child.isMesh && child.name === "geometry") {\n          const texture = new three__WEBPACK_IMPORTED_MODULE_1__.TextureLoader().load(textureImage);\n          texture.flipY = false;\n          texture.colorSpace = three__WEBPACK_IMPORTED_MODULE_1__.SRGBColorSpace;\n          child.material = new three__WEBPACK_IMPORTED_MODULE_1__.MeshBasicMaterial({\n            map: texture,\n            visible: true\n          });\n          child.material.transparent = true;\n          child.material.opacity = 1;\n          geometryTextureRef.current = texture;\n        }\n        if (child.isMesh && child.name === "shades") {\n          child.material.transparent = true;\n          child.material.opacity = 0.4; // Set opacity to 50%\n          child.material.needsUpdate = true;\n        }\n        if (child.isMesh && child.name === "mockupArea") {\n          const material = new three__WEBPACK_IMPORTED_MODULE_1__.MeshBasicMaterial({\n            transparent: true,\n            opacity: 0.8\n          });\n          child.material = material;\n          mockupAreaMaterialRef.current = material;\n        }\n      });\n      scene.add(gltf.scene);\n    }, undefined, function (error) {\n      console.error(error);\n    });\n    function animate() {\n      animationFrameId = requestAnimationFrame(animate);\n      renderer.render(scene, camera);\n    }\n    animate();\n\n    // Return a cleanup function that will be called when the component is unmounted or before a new scene is created\n    return () => {\n      // Stop the animation\n      cancelAnimationFrame(animationFrameId);\n\n      // Remove the renderer\'s DOM element from the container\n      currentContainerRef.removeChild(renderer.domElement);\n\n      // Traverse the scene and dispose the materials and geometries\n      scene.traverse(object => {\n        if (!object.isMesh) return;\n        object.geometry.dispose();\n        if (object.material.isMaterial) {\n          cleanMaterial(object.material);\n        } else {\n          for (const material of object.material) cleanMaterial(material);\n        }\n      });\n\n      // Dispose of the renderer\n      renderer.dispose();\n    };\n    function cleanMaterial(material) {\n      material.dispose();\n\n      // dispose textures\n      for (const key of Object.keys(material)) {\n        const value = material[key];\n        if (value && typeof value === "object" && "minFilter" in value) {\n          value.dispose();\n        }\n      }\n    }\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (mockupAreaMaterialRef.current) {\n      mockupAreaMaterialRef.current.color.set((0,_uiw_color_convert__WEBPACK_IMPORTED_MODULE_3__.hsvaToHex)(color));\n    }\n  }, [color]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    console.log(textureImage);\n    if (geometryTextureRef.current && textureImage) {\n      const loader = new three__WEBPACK_IMPORTED_MODULE_1__.TextureLoader();\n      loader.load(textureImage, function (newTexture) {\n        newTexture.flipY = false;\n        newTexture.colorSpace = three__WEBPACK_IMPORTED_MODULE_1__.SRGBColorSpace;\n        geometryTextureRef.current.image = newTexture.image;\n        geometryTextureRef.current.needsUpdate = true;\n      });\n    }\n  }, [textureImage]);\n  const downloadImage = () => {\n    // Set a higher resolution\n\n    const initialWidth = containerRef.current.clientWidth;\n    const initialHeight = containerRef.current.clientHeight;\n    const newWidth = 1024;\n    const newHeight = initialHeight * newWidth / initialWidth;\n\n    // Resize the renderer\n\n    rendererRef.current.setSize(newWidth, newHeight);\n\n    // Render the scene again with the higher resolution\n\n    // Render the scene\n    rendererRef.current.render(sceneRef.current, cameraRef.current);\n\n    // Convert the rendered frame to a base64-encoded PNG\n    const dataURL = rendererRef.current.domElement.toDataURL("image/png");\n\n    // Create a download link\n    const a = document.createElement("a");\n    a.href = dataURL;\n    a.download = mockupName + ".png";\n\n    // Reset the renderer size to the original dimensions\n\n    rendererRef.current.setSize(initialWidth, initialHeight);\n\n    // Trigger a click event on the download link\n    // Note: This might not work in all browsers due to popup blockers\n    a.click();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", {\n    className: "threejs-app",\n    ref: containerRef\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", {\n    className: "btn btn-wide btn-primary",\n    onClick: downloadImage\n  }, "Download Image"));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThreeJSApp);\n\n//# sourceURL=webpack://frontend/./src/components/ThreeJSApp.js?')},"?4f7e":()=>{eval("/* (ignored) */\n\n//# sourceURL=webpack://frontend/./util.inspect_(ignored)?")}}]);